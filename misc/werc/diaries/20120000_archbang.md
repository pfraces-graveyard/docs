# instalación servidor

*   instalar archbang segun manual (buscar referencia)
    *   configurar particiones segun documento (Partitioning de archlinux 
        forums - buscar referencia)
*   actualizar: sudo packer -Syu
*   seleccionar mirrors optimos: cd /etc/pacman.d && rankmirrors mirrorlist > 
    ~/foo
    *   sustituir /etc/pacman.d/mirrorlist por ~/foo
    *   eliminar ~/foo
*   cambiar distribucion de teclado: (en /etc/rc.conf) LOCALE=es_ES.utf8 y 
    KEYMAP=es
*   instalar vim (sudo packer -S vim)
    *   cambiar editor por defecto a vim
    *   (en ~/.bashrc) export EDITOR=vim (buscar referencia)
    *   no carga la variable $EDITOR (almenos al entrar por ssh, visudo por 
        ejemplo ejecuta vi no vim
    *   buscar otro modo, si puede ser buscar el lugar donde se definia nano 
        como editor por defecto
    *   comprobar porque no se carga desde .bashrc ya que $SHELL == /bin/bash 
        desde ssh
*   instalar openssh (sudo packer -S openssh)
    *   configurar openssh (segun documento de archlinux forums)
*   instalar ftp client (sudo packer -S lftp)
    *   para acceder a dmz: lftp -u master ftp://192.168.1.5

## instalar x2go (sudo packer -S x2goserver-one)

>   warning: nxproxy is flagged out of date  
>   warning: nxcomp is flagged out of date  
>   ==> Making package: nxproxy 3.4.0_2-1  
>   ==> Checking runtime dependencies...  
>   ==> Missing Dependencies:  
>     -> nxcomp  
>   ==> Checking buildtime dependencies...  
>   ==> ERROR: Could not resolve all dependencies.  
>   The build failed  
>   ==> Making package: nxcompext 3.4.0_1-2  
>   ==> Checking runtime dependencies...  
>   ==> Missing Dependencies:  
>     -> nxcomp  
>   ==> Checking buildtime dependencies...  
>   ==> ERROR: Could not resolve all dependencies.  
>   The build failed  
>   ==> Making package: x2goagent 3.4.0_5_1-5  
>   ==> Checking runtime dependencies...  
>   ==> Missing Dependencies:  
>     -> nxcompext  
>     -> nxproxy  
>   ==> Checking buildtime dependencies...  
>   ==> ERROR: Could not resolve all dependencies.  
>   The build failed  
>   Dependencies for `x2goserver-one' are not met, not building...  

*   como nxcomp se ha construido al final, voy a comprobar que esté instalado y 
    si es asi volvere a probar

        $ packer -Qs nxcomp

>   packer: Option `-Qs' is not valid.

        $ pacman -Qs nxcomp

>   local/nxcomp 3.4.0_7-2 [1.88 MB] (x2go alts)
>       NX compression library

        $ sudo packer -S x2goserver-one (one more time)

>   warning: nxproxy is flagged out of date

*   ahora parece que si se instala
*   informar a quien mantiene el PKGBUILD

>   ==> Ensure that fuse module is loaded
    
*   cargado y en MODULES()

>   ==> Any user with x2gopgwrapper root access can use the system:
>       %users ALL=(ALL) NOPASSWD: /usr/bin/x2gopgwrapper

        $ /etc/rc.d/x2goserver start

>   /etc/rc.d/functions: line 67: warning: setlocale: LC_CTYPE: cannot change
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_NUMERIC: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_TIME: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_COLLATE: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_MESSAGES: cannot 
    change locale (es_ES.UTF-8): No such file or directory  

*   mas adelante en el documeto de arch - x2go dice:

>   If you are using other than POSIX (C) locale, you may want to add the 
    following line to /etc/ssh/sshd_config:  
>   # Allow client to pass locale environment variables  
>   AcceptEnv LANG LC_*  
>   Then, restart the daemon (as root):  
>   /etc/rc.d/sshd restart  

*   asi que pruebo las modificaciones y vuelvo a lanzar el x2goserver daemon
      
        $ sudo /etc/rc.d/sshd restart

>   /etc/rc.d/functions: line 67: warning: setlocale: LC_CTYPE: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_NUMERIC: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_TIME: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_COLLATE: cannot change 
    locale (es_ES.UTF-8): No such file or directory  
>   /etc/rc.d/functions: line 67: warning: setlocale: LC_MESSAGES: cannot 
    change locale (es_ES.UTF-8): No such file or directory  
>   :: Stopping Secure Shell Daemon [DONE]  
>   :: Starting Secure Shell Daemon [DONE]  

*   Al volver a probar de lanzar el daemon x2goserver vuelve a lanzarme el 
    mismo error
    *   Salgo de la sesion ssh y vuelvo a entrar por si es necesario para 
        obtener la nueva configuracion de sshd, pero nuevamente salta el 
        mismo error
    *   Busco en goolge: archlinux /etc/rc.d/functions warning setlocale 
        "LC_CTYPE: cannot change locale" + "No such file or directory"
    *   El primer resultado me lleva a
        <https://bbs.archlinux.org/viewtopic.php?pid=897160>
    *   Parece que el problema este en los locales generados
    *   Busco en google: arch generate locales
    *   El primer resultado me lleva a
        <https://wiki.archlinux.org/index.php/Locale>

# [TODO]

*   Seguir el documento arch Locale y volver a probar de lanzar el daemon 
    x2goserver
*   Luego seguir con el documento arch x2go desde el ultimo punto marcado (*)
*   Si no da resultado seguir con el hilo anterior y probar las recomendaciones 
    sobre rc.conf.pacnew

# dudas

*   es necesario hacer packer -Syy si se va haciendo packer -Syu?
*   dar acceso a impresoras
*   cambiar dhcp ip (192.168.0.112) por ip fija: 192.168.0.13 ('ip addr' para 
    conocer ip)
*   alta usuarios raul y jordi
    *   usuario de sistema
    *   usuario de ssh
    *   usuario de x2go (no se si es necesario)
*   automatizar actualizacion
*   automatizar rankmirrors
*   leer ~/DOC
*   configurar bash hooks
*   instalar papelera
    *   configurar papelera
*   porque no se puede seleccionar openbox desde el session manager?






